# System

- OS: {{ ansible_distribution }}{% if desktop_wm is defined %}, {{ desktop_wm }}{% endif %}

- Shell: zsh (minimal, no oh-my-zsh)
{% if desktop_wm is defined %}
- Terminal: kitty (FiraCode Nerd Font)
- Browser: Zen
{% endif %}

# Infrastructure

Managed via Ansible repo at `~/.infra`. **Do not install packages or modify system/user config directly.** Make changes in the Ansible repo first, then apply — keep the live system consistent with the repo, never let it drift.

```
cd ~/.infra
ansible-playbook site.yml --tags <tags> --ask-vault-pass
```

{% if ansible_os_family != 'Darwin' %}
# Privileged / Manual Commands

When you need the user to run something manually (privileged commands, interactive prompts, anything that can't run inside Claude Code):

1. Write the commands to `/tmp/claude-pending.sh`
2. Tell the user to run `run-claude` in another terminal
3. Read the output from `/tmp/claude-pending.log` to check the result

**Always use this pattern** — never ask the user to copy-paste commands from chat. The terminal breaks up long lines and makes copy-paste unreliable.

For simple privileged commands that need no interaction, `sudo -A` works directly (rofi askpass popup at `~/.local/bin/sudo-askpass`).
{% endif %}
